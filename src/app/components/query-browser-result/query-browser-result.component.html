<div class="list">
  <div class="flex-row">
    <h3>Result</h3>
    <span>{{entries?.length || 0}} entries found</span>
  </div>
  <ng-container *ngIf="(entries?.length || 0) > 1; else jsonTemplate">
    <app-result-table [entries]="entries"></app-result-table>
  </ng-container>
  <ng-template #jsonTemplate>
    <ng-container *ngFor="let entity of entries">
      <ng-container *ngIf="entity; else noEntity">
        <div class="item">
          <pre>{{entity?.data || null | json}}</pre>
          <button mat-icon-button [matMenuTriggerFor]="menu" #trigger="matMenuTrigger">
            <mat-icon>more_vert</mat-icon>
          </button>
        </div>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="gotoConsole(entity)">
            <mat-icon>exit_to_app</mat-icon>
            Open in Console
          </button>
          <button mat-menu-item (click)="edit(entity)">
            <mat-icon>create</mat-icon>
            Edit
          </button>
          <button mat-menu-item (click)="delete(entity)">
            <mat-icon>delete</mat-icon>
            Delete
          </button>
        </mat-menu>
      </ng-container>
    </ng-container>

  </ng-template>
</div>

<ng-container *ngIf="!(entries?.length)">
  <ng-container [ngTemplateOutlet]="noEntity"></ng-container>
</ng-container>

<ng-template #noEntity>
  <pre>{{result | json}}</pre>
</ng-template>